<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Home </h1>
    <a href="/album">Álbum</a> <br>
    <a href="/logout">Sair</a> <br>

    <form action="/imagem" method="post">
        <label for="content"> Título: </label>
        <input type="text" name="titulo" value="" /> <br>
        <label for="content"> URL: </label>
        <input type="text" name="url" value="" /> <br> <br>
        <button type="submit"> Adicionar</button>
    </form>

    <div class="gallery">
         
        {{#each imagens}}
        <div class="foto-card">

            <div class="info">
                <h4>Foto: {{this.titulo}}</h4>
                <pre>ID: {{this._id}}<br>Dono: {{this.donoId}}</pre>

                <form action="/imagem/set-album/{{this._id}}" method="POST">
                    <div class="form-row">
                        <label for="albumId">Álbum:</label>
                        <select name="albumId" id="albumId">
                            <option value="">(Sem Álbum)</option><!-- Loop para listar os álbuns do usuário -->
                            <!-- FIX: Usa ../albuns para aceder ao contexto pai -->
                            {{#each ../albuns}}
                            <option value="{{this._id}}">{{this.nome}}</option>
                            {{/each}}
                        </select>
                    </div>
                    <button type="submit" style="margin-top: 5px;">Mover</button>
                </form>
            </div>

            <form action="/imagem/delete/{{this._id}}" method="post">
                <button type="submit">Apagar</button>
            </form>
        </div>
    </div>
    {{else}}

    <p>Você ainda não tem nenhuma imagem. Adicione uma no formulário acima!</p>

    {{/each}}
    </div>
</body>

</html>